<div class="modal-content" [ngClass]="{'loading': isLoading == true}">
  <div class="modal-header">
    <div class="modal-title h4" id="example-modal-sizes-title-lg">
      <ng-container>Create Analysis</ng-container>
    </div>
  </div>
  <div class="modal-body">
    <div class="overlay overlay-block cursor-default">
      <ng-container *ngIf="isLoading">
        <div class="overlay-layer bg-transparent">
          <div class="spinner spinner-lg spinner-success"></div>
        </div>
      </ng-container>
      <ng-container *ngIf="pipeLine.length != 0">
        <form action="#" class="form form-label-right" [formGroup]="formGroup" autocomplete="off">
          <div class="form-group row">
            <div class="col-lg-12">
              <label class="form-label">Genome Build</label>
              <div>
                <input class="me-2" formControlName="genomeBuild" type="radio" name="genomeBuild" id="genomeBuildHg19"
                  value="hg19">
                <label class="me-5" style="cursor: pointer;" for="genomeBuildHg19">Hg19</label>
                <input class="me-2" formControlName="genomeBuild" type="radio" name="genomeBuild" id="genomeBuildHg38"
                  value="hg38">
                <label style="cursor: pointer;" for="genomeBuildHg38">Hg38</label>
              </div>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-12">
              <label class="form-label">Sequencing Type</label>
              <div>
                <input class="me-2" formControlName="sequencingType" type="radio" name="sequencingType" id="sequencingTypeWgs"
                  value="WGS">
                <label class="me-5" style="cursor: pointer;" for="sequencingTypeWgs">WGS</label>
                <input class="me-2" formControlName="sequencingType" type="radio" name="sequencingType" id="sequencingTypeWes"
                  value="WES">
                <label style="cursor: pointer;" for="sequencingTypeWes">WES</label>
              </div>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-12">
              <label class="form-label">Select Pipeline</label>
              <select #pipelineList class="form-control" formControlName="pipeLineList"
                (change)="getSamplesByPipeLine(pipelineList.value)">
                <option *ngFor="let data of pipeLine" value="{{data.id}}">{{data.name}}</option>
              </select>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-12" *ngIf="!id">
              <label class="form-label">Select Samples</label>
              <select class="form-control" formControlName="sampleList">
                <option *ngFor="let data of sampleList" value="{{data.id}}">{{data.name}}</option>
              </select>
            </div>

            <div class="col-lg-12" *ngIf="id">
              <label class="form-label">Sample Name</label>
              <input type="text" class="form-control form-control-lg form-control-solid is-valid" name="sampleList"
                autocomplete="off" formControlName="sampleList" />
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-12">
              <label class="form-label">Enter Analysis Name</label>
              <input *ngIf="!id" type="text" class="form-control form-control-lg form-control-solid" name="analysisName"
                placeholder="Analysis Name" autocomplete="off" [class.is-invalid]="isControlInvalid('analysisName')"
                [class.is-valid]="isControlValid('analysisName')"
                [ngModel]="formatSampleValue(formGroup.value.sampleList, 'sample_name')"
                formControlName="analysisName" />
                <input *ngIf="id" type="text" class="form-control form-control-lg form-control-solid is-valid" name="analysisName"
                autocomplete="off" formControlName="analysisName" />
              <div class="valid-feedback" *ngIf="isControlValid('analysisName')">Analysis Name was entered correct</div>
              <div class="invalid-feedback" *ngIf="controlHasError('required', 'analysisName')">Analysis Name is
                required</div>
            </div>
          </div>
          <div class="form-group row">
            <div class="col-lg-12">
              <label class="form-label">Description</label>
              <textarea class="form-control form-control-lg mb-3" rows="10" formControlName="description"></textarea>
            </div>
          </div>
        </form>
      </ng-container>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light btn-elevate mr-2" (click)="modal.dismiss()">Cancel</button>
    <ng-container *ngIf="pipeLine.length != 0 && sampleList.length != 0 && !id">
      <button type="submit" class="btn btn-primary btn-elevate" (click)="create()"
        [disabled]="formGroup.invalid || isLoading ">Create</button>
    </ng-container>
    <ng-container *ngIf="id">
      <button type="submit" class="btn btn-primary btn-elevate" (click)="save()"
        [disabled]="formGroup.invalid || isLoading ">Save</button>
    </ng-container>
    <ng-container *ngIf="isLoading">
      <span class="spinner spinner-primary ml-3 mr-5"></span>
    </ng-container>
  </div>

</div>